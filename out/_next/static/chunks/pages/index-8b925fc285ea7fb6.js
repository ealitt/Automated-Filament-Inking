(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(4150)}])},4150:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var s=n(5893),o=n(9008),i=n(5675),r=n(7294),l=n(9477),a=n(9251),c=n(7591);(0,a.l7)({MeshLine:c.MeshLine,MeshLineMaterial:c.MeshLineMaterial});var u=function(e){var t=e.points,n=e.color;return(0,s.jsxs)("mesh",{raycast:c.MeshLineRaycast,children:[(0,s.jsx)("meshLine",{attach:"geometry",points:t}),(0,s.jsx)("meshLineMaterial",{useMap:0,lineWidth:.1,sizeAttenuation:1,color:n})]})};var h=function(e){return(0,s.jsxs)("mesh",{position:[-120,0,120],rotation:[-Math.PI/2,0,0],scale:[255,255,1],children:[(0,s.jsx)("planeBufferGeometry",{}),(0,s.jsx)("meshBasicMaterial",{color:"gray"})]})},d=n(9040),f=n(6665),x=n(9e3);function g(e){var t=e.gcodeSource,n=e.getColorChanges,o=function(e){for(var t=function(e){var t=s[e];if(c.some((function(e){return t.includes(e)}))&&console.log("INTRO LINE"),r.some((function(e){return t.includes(e)}))&&!a.some((function(e){return t.includes(e)}))||c.some((function(e){return t.includes(e)}))&&d.length<1){var n=t.split(" ");["X","Y","Z"].forEach((function(e,t){n.forEach((function(t){t.includes(e)&&(u[e]=parseFloat(t.substr(1)))}))})),o.push(-u.X,u.Z,u.Y),n.forEach((function(e){if(e.includes("E")){var t=parseFloat(e.substr(1));isNaN(t)||(h+=t)}}))}else"T0"!=t&&"T1"!=t&&"T2"!=t&&"T3"!=t&&"T4"!=t||(i.push({points:o,color:new l.Color(x)}),o=[],x==f.cyan?d.push("E".concat(h," C1 M0 Y0 K0")):x==f.magenta?d.push("E".concat(h," C0 M1 Y0 K0")):x==f.yellow?d.push("E".concat(h," C0 M0 Y1 K0")):x==f.black?d.push("E".concat(h," C0 M0 Y0 K1")):x==f.white&&d.push("E".concat(h," C0 M0 Y0 K0")),"T0"==t?x=f.cyan:"T1"==t?x=f.magenta:"T2"==t?x=f.yellow:"T3"==t?x=f.black:"T4"==t&&(x=f.white));if(e==s.length-1)if(d.length>0){var g=d[0];d.splice(0,0,"E0".concat(g.substr(g.indexOf(" ")))),d.push("E".concat(h).concat(d[d.length-2].substr(d[d.length-1].indexOf(" ")))),d.push("E".concat(h+250," C0 M0 Y0 K0")),i[i.length-2],i.push({points:o,color:new l.Color(x)})}else d.push("E0 C0 M0 Y0 K0"),d.push("E".concat(h," C0 M0 Y0 K0")),d.push("E".concat(h+250," C0 M0 Y0 K0")),console.log("filamentCounter"),console.log(h)},n={},s=e.split("\n"),o=[],i=[],r=["G1"],a=[";"],c=["; intro line"],u={X:0,Y:0,Z:0},h=0,d=[],f={cyan:65535,magenta:16711935,yellow:16776960,black:0,white:16777215},x=new l.Color(f.white),g=0;g<s.length;g++)t(g);return n.colorChanges=d,console.log(d),0==i.length&&i.push({points:o,color:new l.Color(x)}),n.pointSets=i,n}(t),i=[];console.log(o.pointSets[0].points);for(var c=0;c<o.pointSets.length;c++)i.push((0,s.jsx)(u,{points:o.pointSets[c].points,color:o.pointSets[c].color},c));return(0,r.useEffect)((function(){n(o.colorChanges)}),[t]),(0,s.jsx)("div",{className:"w-2/3 h-full px-2 py-2 bg-slate-300 sm:px-0 flex rounded-lg",children:(0,s.jsxs)(a.Xz,{shadows:!0,className:"",camera:{position:[60,100,-80]},children:[(0,s.jsx)("ambientLight",{color:"white",intensity:.2}),(0,s.jsx)(d.i,{}),(0,s.jsx)(f.z,{makeDefault:!0}),(0,s.jsxs)(x.M,{children:[i,(0,s.jsx)(h,{})]})]})})}var p=n(8523),m=(n(3162),function(e){var t=e.colorChanges;return(0,s.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg",onClick:function(e){if(e.preventDefault(),"object"==typeof t){var n=new Blob([t.join("\n")]);saveAs(n,"inking.txt")}else if("string"==typeof t){var s=new Blob([t]);saveAs(s,"inking.txt")}},children:"Download Inking File"})});function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},s=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),s.forEach((function(t){v(e,t,n[t])}))}return e}var b="",j=(0,s.jsx)("div",{});function y(e){var t=e.getGcodeData,n=e.colorChanges,o=(0,r.useState)({}),i=o[0],l=o[1],a=(0,r.useCallback)((function(e){e.forEach((function(e){var n=new FileReader;l(i=e),n.onabort=function(){return console.log("file reading was aborted")},n.onerror=function(){return console.log("file reading has failed")},n.onload=function(){b=n.result,t(b)},n.readAsText(e)}))}),[]),c=(0,p.uI)({onDrop:a,keepLocal:!0,maxFiles:1}),u=c.getRootProps,h=c.getInputProps,d=c.isDragActive;Object.keys(i).length>0&&(j=(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("div",{className:"font-bold",children:"Uploaded File:"}),(0,s.jsxs)("div",{className:"ml-4 break-words",children:[i.name," - ",(i.size/1e6).toFixed(2)," MB"]})]}));var f=n.length>0?Number.parseFloat(n[n.length-2].split("E")[1].split(" ")[0]).toFixed(2):0;return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",w({className:"flex h-32 p-2 border-2 border-slate-600 rounded-lg hover:border-slate-500 hover:text-slate-500 overflow-hidden"},u(),{children:(0,s.jsxs)("div",{className:"w-3/4 m-auto",children:[(0,s.jsx)("input",w({className:"m-auto"},h())),(0,s.jsxs)("div",{className:"m-auto flex space-x-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 font-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,s.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})}),d?(0,s.jsx)("p",{children:"Drop GCODE file here"}):(0,s.jsx)("p",{children:"Upload GCODE file, or click to select"})]})]})})),(0,s.jsxs)("div",{className:"h-full space-y-10",children:[j,(0,s.jsxs)("div",{children:["Filament used: ",f," mm"]}),(0,s.jsx)("div",{className:"grid col content-between",children:(0,s.jsx)(m,{colorChanges:n})})]})]})}n(3935);var C=n(9604);function k(e){var t=e.colorChanges,n=(0,r.useRef)(null),o=(0,r.useState)(t),i=o[0],l=o[1];return(0,s.jsxs)("div",{className:"h-full flex flex-col space-y-4",children:[(0,s.jsx)(C.ZP,{height:"100%",defaultLanguage:"text",defaultValue:t.join("\n"),theme:"vs-dark",onMount:function(e,t){console.log("editor set"),n.current=e},onChange:function(){l(n.current.getValue())}}),(0,s.jsx)(m,{colorChanges:i})]})}var N=n(5152);function E(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var M,O,F,Y,T,K,X=function(){function e(t,n,s,o,i,r,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.draggable=l,this.dragging=!1,this.rollover=!1,this.x=n,this.y=s,this.w=o,this.h=i,this.offsetX=0,this.offsetY=0,this.tool=r,this.selOffsetY=265,this.selOffsetX=152,this.selected=!1,this.remove=!1,this.createOptions(t)}var t,n,s;return t=e,n=[{key:"createOptions",value:function(e){this.sel=e.createSelect(),this.sel.position(this.x+this.selOffsetX,this.y+this.selOffsetY),this.sel.option("Tool 0"),this.sel.option("Tool 1"),this.sel.option("Tool 2"),this.sel.option("Tool 3"),this.sel.option("Tool 4"),this.sel.selected(this.tool)}},{key:"over",value:function(e){this.draggable&&e.mouseX>this.x&&e.mouseX<this.x+this.w&&e.mouseY>this.y&&e.mouseY<this.y+this.h?this.rollover=!0:this.rollover=!1}},{key:"update",value:function(e,t){this.dragging&&e.mouseX>0&&e.mouseX<t.x+t.w&&(this.x=e.mouseX+this.offsetX,this.sel.position(this.x+this.selOffsetX,this.y+this.selOffsetY),e.mouseY>200?this.remove=!0:this.remove=!1)}},{key:"show",value:function(e,t){e.stroke(0),e.fill(t),this.dragging||this.rollover||this.selected?e.strokeWeight(3):e.strokeWeight(1),e.rect(this.x,this.y,this.w,this.h)}},{key:"pressed",value:function(e){this.draggable&&e.mouseX>this.x&&e.mouseX<this.x+this.w&&e.mouseX>0&&e.mouseY>this.y&&e.mouseY<this.y+this.h?(this.dragging=!0,this.offsetX=this.x-e.mouseX,this.offsetY=this.y-e.mouseY,this.selected=!0):this.selected=!1}},{key:"released",value:function(e){this.dragging=!1,this.remove=!1}}],n&&E(t.prototype,n),s&&E(t,s),e}(),P=(0,N.default)((function(){return n.e(257).then(n.t.bind(n,4210,23)).then((function(e){return e.default}))}),{loadableGenerated:{webpack:function(){return[4210]}},ssr:!1}),S={x:1,y:1,h:25,w:0},L=[];function _(e){e.getColors;var t=function(){o&&o.resizeCanvas(window.innerWidth/5,window.innerHeight/5)},n=(0,r.useState)(),o=n[0],i=n[1],l=(0,r.useState)(),a=l[0],c=l[1];(0,r.useEffect)((function(){return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]);var u=function(e,t){t.forEach((function(e,n){e.selected&&e.remove&&(e.sel.remove(),t.splice(n,1))}))},h=function(e,t){return"Tool 0"==t?M.color():"Tool 1"==t?O.color():"Tool 2"==t?F.color():"Tool 3"==t?Y.color():T.color()},d=function(e,t){f(t).forEach((function(t){e.strokeWeight(2),e.fill(h(e,t.sel.value())),e.rect(t.x+5,S.y,S.w-t.x,S.h),t.x+5}))},f=function(e){return e.sort((function(e,t){return e.x>t.x||e.x===t.x&&e.x>t.x?1:-1}))},x=function(e){M=e.createColorPicker("#00FFFF"),O=e.createColorPicker("#FF00FF"),F=e.createColorPicker("#FFFF00"),Y=e.createColorPicker("#000000"),T=e.createColorPicker("#FFFFFF"),M.position(window.innerWidth/10,350),O.position(window.innerWidth/10+75,350),F.position(window.innerWidth/10+150,350),Y.position(window.innerWidth/10+225,350),T.position(window.innerWidth/10+300,350)},g=function(e){e.mouseX>S.x&&e.mouseX<S.x+S.w&&e.mouseY>S.y&&e.mouseY<S.y+S.h&&L.push(new X(e,e.mouseX,40,20,20,"Tool 0",!0))};return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("div",{children:"Currently an experimental feature"}),(0,s.jsx)(P,{setup:function(e,t){i(e),K=e.createCanvas(window.innerWidth/5,window.innerHeight/5).parent(t),S.w=window.innerWidth/5-6,e.colorMode(e.HSB),e.textSize(14),x(e);var n=new X(e,0,40,20,20,"Tool 0",!1);L=[n],K.mousePressed((function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];g(e),L.forEach((function(t){t.pressed(e)}))})),K.mouseReleased((function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];L.forEach((function(t){t.released(e)}))}))},draw:function(e){e.background("#94a3b8"),L.forEach((function(t){t.over(e),t.update(e,S),t.show(e,h(e,t.sel.value()))})),d(e,L),u(e,L)}}),(0,s.jsxs)("div",{className:"flex flex-col space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{for:"length",class:"block text-md font-semibold text-gray-700",children:"Length of Filament"}),(0,s.jsxs)("div",{class:"mt-1 relative rounded-md shadow-sm",children:[(0,s.jsx)("input",{type:"text",name:"length",id:"length",class:"h-10 focus:ring-blue-500 focus:border-blue-500 block w-full pl-4 pr-12 sm:text-sm border-gray-300 rounded-md",placeholder:"0.00",value:a,onChange:function(e){return c(e.target.value)}}),(0,s.jsxs)("div",{class:"absolute inset-y-0 right-0 flex items-center",children:[(0,s.jsx)("label",{for:"",class:"sr-only"}),(0,s.jsx)("select",{id:"",name:"",class:"focus:ring-blue-500 focus:border-blue-500 h-full py-0 pl-2 pr-7 border-transparent bg-transparent text-gray-500 sm:text-sm rounded-md",children:(0,s.jsx)("option",{children:"Milimeters"})})]})]})]}),(0,s.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg",onClick:function(){if(a>0){var e=[];f(L).forEach((function(t){var n=a*(t.x/S.w);"Tool 0"==t.sel.value()?e.push("E".concat(n," C1 M0 Y0 K0")):"Tool 1"==t.sel.value()?e.push("E".concat(n," C0 M1 Y0 K0")):"Tool 2"==t.sel.value()?e.push("E".concat(n," C0 M0 Y1 K0")):"Tool 3"==t.sel.value()?e.push("E".concat(n," C0 M0 Y0 K1")):e.push("E".concat(n," C0 M0 Y0 K0"))})),e.push("E".concat(a," C0 M0 Y0 K0")),event.preventDefault();var t=new Blob([e.join("\n")]);saveAs(t,"inking.txt")}},children:"Download"})]})]})}function D(e){e.gcode;return(0,s.jsx)("div",{className:"h-full w-full p-2",children:(0,s.jsx)(_,{getColors:function(e){}})})}var W=n(6727);function z(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function A(){var e=(0,r.useState)(""),t=e[0],n=e[1],l=(0,r.useState)({}),a=l[0],c=l[1];return(0,s.jsxs)("div",{className:"",children:[(0,s.jsxs)(o.default,{children:[(0,s.jsx)("title",{children:"Create Next App"}),(0,s.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsxs)("main",{className:"h-screen w-full px-10 bg-slate-800",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"py-10 text-2xl font-bold text-slate-100",children:"Automated Filament Inking"}),(0,s.jsx)("div",{className:"fill-slate-100 hover:fill-slate-400",children:(0,s.jsx)("a",{href:"https://github.com/ealitt/Multi-Color-Inking",target:"_blank",rel:"noopener noreferrer",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})})})})]}),(0,s.jsxs)("div",{className:"h-3/4 flex m-auto flex-row space-x-2 px-20",children:[(0,s.jsx)("div",{className:"w-1/3 h-full bg-slate-400 rounded-lg flex flex-col",children:(0,s.jsxs)(W.OK.Group,{children:[(0,s.jsxs)(W.OK.List,{className:"flex h-12 m-6 space-x-1 bg-blue-900/20 rounded-xl",children:[(0,s.jsx)(W.OK,{className:function(e){return z("w-full py-2.5 px-1 text-sm leading-5 font-medium text-slate-700 rounded-lg","focus:outline-none focus:ring-2 ring-offset-2 ring-offset-slate-400 ring-white ring-opacity-60",e.selected?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white")},children:"Upload File"}),(0,s.jsx)(W.OK,{className:function(e){return z("w-full py-2.5 px-1 text-sm leading-5 font-medium text-slate-700 rounded-lg","focus:outline-none focus:ring-2 ring-offset-2 ring-offset-slate-400 ring-white ring-opacity-60",e.selected?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white")},children:"Manual"}),(0,s.jsx)(W.OK,{className:function(e){return z("w-full py-2.5 px-1 text-sm leading-5 font-medium text-slate-700 rounded-lg","focus:outline-none focus:ring-2 ring-offset-2 ring-offset-slate-400 ring-white ring-opacity-60",e.selected?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white")},children:"Preview"})]}),(0,s.jsxs)(W.OK.Panels,{className:"h-5/6 box-border px-6 rounded-lg",children:[(0,s.jsx)(W.OK.Panel,{className:"p-4",children:(0,s.jsx)(y,{getGcodeData:function(e){n(e)},colorChanges:a})}),(0,s.jsx)(W.OK.Panel,{children:(0,s.jsx)(D,{})}),(0,s.jsx)(W.OK.Panel,{className:"h-full m-auto",children:(0,s.jsx)(k,{colorChanges:a})})]})]})}),(0,s.jsx)(g,{gcodeSource:t,getColorChanges:function(e){c(e)}})]})]}),(0,s.jsx)("footer",{className:"flex p-8 white",children:(0,s.jsx)("div",{className:"m-auto",children:(0,s.jsxs)("a",{href:"https://souzoumaker.com",target:"_blank",rel:"noopener noreferrer",children:["A project by"," ",(0,s.jsx)("span",{className:"p-1",children:(0,s.jsx)(i.default,{src:"/logo.png",alt:"Souzoumaker Logo",width:16,height:16})}),"Souzoumaker"]})})})]})}}},function(e){e.O(0,[737,650,305,774,888,179],(function(){return t=8581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime/helpers/extends"),t=require("@react-three/fiber"),r=require("react"),n=require("three-stdlib");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var s=o(e),c=a(r);const u=c.forwardRef((({makeDefault:e,camera:r,domElement:o,regress:a,onChange:u,onStart:i,onEnd:f,...l},d)=>{const{invalidate:v,camera:b,gl:m,events:E,set:p,get:g,performance:h,viewport:j}=t.useThree(),O=r||b,y=o||("boolean"!=typeof E.connected?E.connected:m.domElement),L=c.useMemo((()=>new n.TrackballControls(O)),[O]);return t.useFrame((()=>{L.enabled&&L.update()})),c.useEffect((()=>(L.connect(y),()=>{L.dispose()})),[y,a,L,v]),c.useEffect((()=>{const e=e=>{v(),a&&h.regress(),u&&u(e)};return L.addEventListener("change",e),i&&L.addEventListener("start",i),f&&L.addEventListener("end",f),()=>{i&&L.removeEventListener("start",i),f&&L.removeEventListener("end",f),L.removeEventListener("change",e)}}),[u,i,f]),c.useEffect((()=>{L.handleResize()}),[j]),c.useEffect((()=>{if(e){const e=g().controls;return p({controls:L}),()=>p({controls:e})}}),[e,L]),c.createElement("primitive",s.default({ref:d,object:L},l))}));exports.TrackballControls=u;

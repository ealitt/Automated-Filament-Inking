"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime/helpers/extends"),t=require("@react-three/fiber"),r=require("react"),n=require("three-stdlib");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function s(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var a=o(e),c=s(r);const u=r.forwardRef((({camera:e,makeDefault:o,regress:s,domElement:u,onChange:i,onStart:l,onEnd:f,...d},b)=>{const m=t.useThree((e=>e.invalidate)),v=t.useThree((e=>e.camera)),h=t.useThree((e=>e.gl)),E=t.useThree((e=>e.events)),p=t.useThree((e=>e.set)),g=t.useThree((e=>e.get)),j=t.useThree((e=>e.performance)),O=e||v,T=u||("boolean"!=typeof E.connected?E.connected:h.domElement),y=r.useMemo((()=>new n.ArcballControls(O)),[O]);return t.useFrame((()=>{y.enabled&&y.update()})),r.useEffect((()=>(y.connect(T),()=>{y.dispose()})),[T,s,y,m]),r.useEffect((()=>{const e=e=>{m(),s&&j.regress(),i&&i(e)};return y.addEventListener("change",e),l&&y.addEventListener("start",l),f&&y.addEventListener("end",f),()=>{y.removeEventListener("change",e),l&&y.removeEventListener("start",l),f&&y.removeEventListener("end",f)}}),[i,l,f]),r.useEffect((()=>{if(o){const e=g().controls;return p({controls:y}),()=>p({controls:e})}}),[o,y]),c.createElement("primitive",a.default({ref:b,object:y},d))}));exports.ArcballControls=u;

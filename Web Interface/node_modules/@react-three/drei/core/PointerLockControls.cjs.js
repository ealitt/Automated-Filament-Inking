"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime/helpers/extends"),t=require("@react-three/fiber"),r=require("react"),n=require("three-stdlib");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function c(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var s=o(e),a=c(r);const u=a.forwardRef((({selector:e,onChange:r,onLock:o,onUnlock:c,enabled:u=!0,...i},f)=>{const{camera:d,...l}=i,v=t.useThree((({gl:e})=>e)),m=t.useThree((e=>e.camera)),h=t.useThree((e=>e.invalidate)),E=t.useThree((e=>e.raycaster)),b=t.useThree((e=>e.events)),p=d||m,k=v.domElement||("boolean"!=typeof b.connected?b.connected:v.domElement),[L]=a.useState((()=>new n.PointerLockControls(p)));return a.useEffect((()=>{if(u){L.connect(k);const e=E.computeOffsets;return E.computeOffsets=e=>({offsetX:e.target.width/2,offsetY:e.target.height/2}),()=>{L.disconnect(),E.computeOffsets=e}}}),[u,L]),a.useEffect((()=>{const t=e=>{h(),r&&r(e)};L.addEventListener("change",t),o&&L.addEventListener("lock",o),c&&L.addEventListener("unlock",c);const n=()=>L.lock(),s=e?Array.from(document.querySelectorAll(e)):[document];return s.forEach((e=>e&&e.addEventListener("click",n))),()=>{L.removeEventListener("change",t),o&&L.addEventListener("lock",o),c&&L.addEventListener("unlock",c),s.forEach((e=>e?e.removeEventListener("click",n):void 0))}}),[r,o,c,e]),a.createElement("primitive",s.default({ref:f,object:L},l))}));exports.PointerLockControls=u;
